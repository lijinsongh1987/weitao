<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>聚点微淘运营管理系统</title>
<link rel="stylesheet" href="./Public/css/base.css">
<link rel="stylesheet" href="./Public/css/page.css">
<include file="Public:common" />
<link href="./Public/css/frame/bootstrap.min.css" rel="stylesheet">
<link href="./Public/css/frame/font-awesome.css" rel="stylesheet" />
<link href="./Public/css/flat/style.css" rel="stylesheet">

<link rel="stylesheet" href="./Public/table/bootstrap-table/css/bootstrap-table.css" />
<link rel="stylesheet" href="./Public/table/bootstrap/3.3.4/css/bootstrap.min.css" />
<link rel="stylesheet" href="./Public//css/fenye.css" />
<link rel="stylesheet"
	href="./Public/select/dist/css/bootstrap-select.css"/>
<link rel="stylesheet" href="./Public/css/select2.min.css"/>
<link rel="stylesheet" href="./Public/ace/bootstrap.css"/>
<style>
.btn-default {
	background-color: #ffffff;
	border-color: #ccc;
	color: #777;
}

.btn-default:hover,.btn-default:focus,.btn-default:active,.btn-default.active,.open .dropdown-toggle.btn-default
	{
	background-color: #ffffff;
	border-color: #ccc;
	color: #777;
}

.ibox-title {
	-moz-border-bottom-colors: none;
	-moz-border-left-colors: none;
	-moz-border-right-colors: none;
	-moz-border-top-colors: none;
	background-color: #ffffff;
	border-color: #e7eaec;
	border-image: none;
	border-style: solid solid none;
	border-width: 4px 0px 0;
	color: inherit;
	margin-bottom: 0;
	padding: 14px 15px 7px;
	min-height: 48px;
}

.ibox {
	clear: both;
	margin-bottom: 25px;
	margin-top: 0;
	padding: 0;
}

.ibox-content {
	clear: both;
}

.ibox-content {
	background-color: #ffffff;
	color: inherit;
	padding: 15px 20px 20px 20px;
	border-color: #e7eaec;
	border-image: none;
	border-style: solid solid none;
	border-width: 1px 0px;
}

@media screen and (min-width:1430px) {
	.goods-box {
		width: 50%;
		float: left
	}
}

#content-list {
	margin: 0 -8px 0 -8px
}

.goods {
	border: 1px solid #DAF3FF;
	margin: 8px
}

.goods:hover {
	border-color: #aed8ff
}

.goods.delete {
	border-color: #ECECEC
}

.goods.delete:hover {
	border-color: #bfbfbf
}

.goods .gird {
	padding: 10px 6px;
	height: 100%;
	text-align: center
}

.goods .gird .meta {
	line-height: 18px;
	padding: 3px 0;
	margin: 0;
	font-size: 13px;
	cursor: default
}

.goods .gird.border {
	border-right: 1px solid #DAF3FF
}

.goods.delete .gird.border {
	border-color: #ECECEC
}

.goods .head {
	background-color: #EAF8FF
}

.goods .head .gird {
	padding: 4px 5px 4px 10px;
	text-align: left;
	float: left
}

.goods.delete .head {
	background-color: #F1F1F1
}

.goods .info {
	height: 95px;
	display: -webkit-box;
	display: -webkit-flex;
	display: flex;
}

.goods .info .image {
	-webkit-box-flex: 1;
	-webkit-flex: 1;
	flex: 1;
	padding-left: 95px;
	padding-right: 15px;
	position: relative;
	text-align: left
}

.goods .info .image .meta {
	line-height: 20px;
	padding: 0
}

.goods .info .picture {
	position: absolute;
	left: 10px
}

.goods .info .picture img {
	width: 75px;
	height: 75px
}

.goods .info .mall-icon {
	width: 16px;
	height: 16px;
	vertical-align: text-bottom
}
</style>
</head>

<body style="background: #f1f2f7">
	<div class="superWrap clearfix">
		<!-- 侧边栏-->
		<include file="Public:left" />
		<div class="superContent">
			<!-- 头部-->
			<div class="super-header super-header2">
				<include file="Public:header" />
			</div>
			<!-- 内容 -->
			<div class="superCtab superCtabBot" style="background: #f1f2f7">

				<div class="col-lg-12" style="margin-top: 20px;">
					<div class="ibox float-e-margins">
						<div class="ibox-title">
							<h5>商品信息列表</h5>
							<a class="btn btn-sm btn-primary" href="javascript:void(0);"
								onclick="shaixuan();"
								style="margin-left: 7%; margin-top: -1.7%;">高级筛选</a>
						</div>
						<div class="ibox-content">
							<form action="" method="get">
								<input type="hidden" name="s" value="GoodsCenter/goodsmanager">
								<input type="hidden" name="shaixuanid" id="shaixuanid" value="0" />
								<div class="row">
									<div class="col-lg-2 col-md-2">
										<input placeholder="商品ID" class="form-control" type="text"
											name="goodsid" id="goodsid" value="{$_GET['phonenumber']}"
											style="height: 36px;">
									</div>
									<div class="col-sm-2 m-b-xs">
										<input placeholder="导入日期（开始）" value="{$_GET['starttime']}"
											class="laydate-icon-molv skindemo form-control"
											name="starttime" id="starttime"
											style="height: 36px; cursor: pointer">
									</div>
									<div class="col-sm-2 m-b-xs row">
										<input placeholder="导入日期（结束）" value="{$_GET['endtime']}"
											class="laydate-icon-molv skindemo form-control"
											name="endtime" id="endtime"
											style="height: 36px; cursor: pointer">
									</div>
									<div class="col-lg-2 col-md-2">
										<input placeholder="卷后价（大于等于）" class="form-control"
											type="text" name="pricegt" id="pricegt"
											value="{$_GET['pricegt']}" style="height: 36px;">
									</div>
									<div class="col-lg-2 col-md-2">
										<input placeholder="卷后价（小于等于）" class="form-control"
											type="text" name="pricelt" id="pricelt"
											value="{$_GET['pricelt']}" style="height: 36px;">
									</div>
									<div class="col-lg-2">
										<button type="submit" class="btn btn-sm btn-primary"
											style="height: 36px; width: 5em">查询</button>
									</div>
								</div>
								<br />
								<div class="row" id="shaixuan" style="display: none;">
									<div class="col-lg-2 col-md-2">
										<select name="type" class="form-control" id="type"
											style="height: 36px;">
											<option value="0" {$_GET['type']==0?'selected':''}>请选择分类</option>
											<volist name="typelist" id="vo">
											<option value="{$vo.tkid}" {$_GET['type']==$vo['tkid']?'selected':''}>{$vo.typename}</option>
											</volist>
										</select>
									</div>
									<div class="col-lg-2 col-md-2">
										<select name="status" class="form-control" id="status"
											style="height: 36px;">
											<option value="0" {$_GET['status']==0?'selected':''}>请选择商品状态</option>
											<option value="1" {$_GET['status']==1?'selected':''}>正常上架</option>
											<option value="2" {$_GET['status']==2?'selected':''}>失效下载</option>
										</select>
									</div>
									<div class="col-lg-2 col-md-2">
										<input placeholder="商品原价（大于等于）" class="form-control"
											type="text" name="yuanpricegt" id="yuanpricegt"
											value="{$_GET['yuanpricegt']}" style="height: 36px;">
									</div>
									<div class="col-lg-2 col-md-2">
										<input placeholder="商品原价（小于等于）" class="form-control"
											type="text" name="yuanpricelt" id="yuanpricelt"
											value="{$_GET['yuanpricelt']}" style="height: 36px;">
									</div>
									<div class="col-lg-2 col-md-2">
										<input placeholder="单月销量（大于等于）" class="form-control"
											type="text" name="salergt" id="salergt"
											value="{$_GET['salergt']}" style="height: 36px;">
									</div>
									<div class="col-lg-2 col-md-2">
										<input placeholder="单月销量（小于等于）" class="form-control"
											type="text" name="salerlt" id="salerlt"
											value="{$_GET['salerlt']}" style="height: 36px;">
									</div>
								</div>
							</form>
							<div id="content-list">
								<div class="clearfix">
									<volist name="list" id="vo">
									<div class="goods-box">
										<div class="goods ">
											<div class="head clearfix">
												<div class="gird" style="width: 26%">
													<p class="meta">
														<input id="goods-534202718153" name="goods-chose"
															value="{$vo.id}" type="checkbox" > <label
															for="goods-534202718153">ID: {$vo.GoodsID}</label>
													</p>
												</div>
												
												<div class="gird" style="width: 21%;">
													<p class="meta align-right" data-rel="popover"
														data-content="商品创建: {$vo.update_time}"
														data-original-title="" title="">{$vo.update_time}</p>
												</div>
												<div class="gird" style="margin-left:11em;">
													<p class="meta align-right" data-id="534202718153">
														<a href="#myModal-1" data-toggle="modal" mce_href=""
															class="btn btn-success btn-minier">查看</a>
														<button action="edit" class="btn btn-info btn-minier">编辑</button>
														<button action="special" class="btn btn-info2 btn-minier">专题</button>
														<if condition="$vo.status eq 0">
														<button class="btn btn-warning btn-minier" onclick="editgoods('{$vo.id}',1)">下架</button>
														<else/>
														<button class="btn btn-warning btn-minier" onclick="editgoods('{$vo.id}',0)">上架</button>
														</if>
														
													</p>
												</div>
											</div>
											<div class="info">
												<div class="gird image border">
													<a class="picture"
														href="{$vo.Pic}"
														target="_blank"> <img data-rel="image"
														data-trigger="hover" data-placement="right"
														data-src="{$vo.Pic}"
														src="{$vo.Pic}"
														data-original-title="" title="">
													</a>
													<p class="meta">
														<a
															href="https://store.taobao.com/shop/view_shop.htm?user_number_id={$vo.SellerID}"
															target="_blank"><img class="mall-icon"
															src="http://www.ls0736.com/static/asset/images/tmall-32.png?v=20170722"></a>
														<a
															href="https://detail.tmall.com/item.htm?id={$vo.GoodsID}"
															target="_blank">{$vo.D_title}</a>
													</p>
												</div>
												<div class="gird border"
													style="width: 15%; min-width: 100px">
													<p class="meta">¥ {$vo.Org_Price}</p>
													<p class="meta">售出{$vo.Sales_num}件</p>
													<p class="meta">{$vo.typename}</p>
												</div>
												<div class="gird border"
													style="width: 18%; min-width: 120px">
													<p class="meta">满{$vo.Org_Price}减{$vo.Quan_price}</p>
													<p class="meta">券后¥{$vo.Price}</p>
													<p class="meta">
                                                    <a data-rel="popover" data-content="券码编号: {$vo.Quan_id}<br/>用券门槛: &amp;yen;{$vo.Quan_condition}<br/>券面金额: &amp;yen;{$vo.Quan_price}<br/>券后价格: &amp;yen;{$vo.Price}<br/>开始时间: {$vo.update_time}<br/>结束时间:{$vo.Quan_time}" href="https://taoquan.taobao.com/coupon/unify_apply.htm?sellerId={$vo.SellerID}&amp;activityId={$vo.Quan_id}" target="_blank" data-original-title="" title="" data-html="true" style="color:blue;">优惠券详情</a>
                                					</p>
												</div>
												<div class="gird" style="width: 16%; min-width: 105px">
													<p class="meta"> 
													<if condition="$vo.Commission_jihua eq 0 and $vo.Commission_queqiao neq 0">
													鹊桥{$vo.Commission_queqiao}%
													</if>
													<if condition="$vo.Commission_queqiao eq 0 and $vo.Commission_jihua neq 0">
													通用{$vo.Commission_jihua}%
													</if>
													</p>
													
												</div>
											</div>
										</div>
									</div>
									</volist>
									
								
								</div>
								<div class="clearfix" style="margin: 0 8px">
									<div class="pull-left checkbox">
										<button id="chose-all" class="btn btn-info btn-mini" onclick="selectall();">
											<i class="fa fa-check"></i> 全部选择
										</button>
										<button id="chose-none" class="btn btn-info btn-mini" onclick="deleteall();">
											<i class="fa fa-times"></i> 全部不选
										</button>
										<button id="chose-reverse" class="btn btn-info btn-mini">
											<i class="fa fa-circle-o"></i> 反向选择
										</button>

										<button id="loo7oooil" class="btn btn-warning btn-mini"
											style="margin-left: 20px" onclick="batheditgoods(1);">批量下架</button>
										<button id="loo7oooil" class="btn btn-warning btn-mini"
											style="margin-left: 20px" onclick="batheditgoods(0);">批量上架</button>
									</div>
									<div class="fenye">
										{$page}
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="myModal-1" class="modal fade" style="display: none;z-index:99999999">
	    <div class="modal-dialog" style="margin-top:10%; width:600px;z-index:999999">
	        <div class="modal-content">
	            <div class="modal-header" style="background:#1c84c6">
	                <button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>
	                <h4 class="modal-title">分类信息</h4>
	            </div>
	            <div class="modal-body">
					<form class="form-horizontal">
	                	<input type="hidden" id="id" name="id">
	                    <div class="form-group">
	                        <label for="inputPassword1" class="col-lg-3 control-label">分类名</label>
	                        <div class="col-lg-8">
	                            <input type="text" class="form-control" id="typename"  name="typename">
	                        </div><span class="col-lg-1" style="color:red;line-height:34px">*</span>
	                    </div>
	                    <div class="form-group">
	                        <label for="inputPassword1" class="col-lg-3 control-label">对应淘客ID</label>
	                        <div class="col-lg-8">
	                            <input type="text" class="form-control" id="tkid"  name="tkid">
	                        </div><span class="col-lg-1" style="color:red;line-height:34px">*</span>
	                    </div>
	                    <div class="form-group">
	                        <div class="col-lg-offset-3 col-lg-10">
	                            <button type="button" class="btn btn-success" id="submit-btn">提交</button>
	                        </div>
	                    </div>
	                   </form>
	            </div>
	        </div>
	    </div>
	</div>
	<!--时间插件-->
	<script src="./Public/table/jquery/2.1.4/jquery.min.js"></script>
	<script src="./Public/laydate/laydate.js"></script>
	<script src="./Public/table/bootstrap/3.3.4/js/bootstrap.min.js"></script>
	<script src="./Public/table/bootstrap-table/js/bootstrap-table.js"></script>
	<script src="./Public/table/bootstrap-table/js/bootstrap-table-zh-CN.js"></script>
	<script src="./Public/js/layer/layer.js"></script>
	<script src="./Public/select/dist/js/bootstrap-select.js"></script>
	<script src="./Public/js/common-scripts.js"></script>
	<script src="./Public/js/select2.full.min.js"></script>
	<script src="./Public/js/zh-CN.js"></script>
	
	<script>
		$(function() {
			laydate.skin('molv');
			laydate({
				elem : '#starttime',
				format : 'YYYY-MM-DD', // 分隔符可以任意定义，该例子表示只显示年月
				festival : true, //显示节日
			});
			laydate({
				elem : '#endtime',
				format : 'YYYY-MM-DD', // 分隔符可以任意定义，该例子表示只显示年月
				festival : true, //显示节日
			});
			$("[data-rel='popover']").popover();
			$("[data-rel='popover']").on("mouseenter", function () {
	                    var _this = this;
	                    $(this).popover("show");
	                    $(this).siblings(".popover").on("mouseleave", function () {
	                        $(_this).popover('hide');
	                    });
	                }).on("mouseleave", function () {
	                    var _this = this;
	                    setTimeout(function () {
	                        if (!$(".popover:hover").length) {
	                            $(_this).popover("hide")
	                        }
	                    }, 100);
	                });
		});
		window.onload=function(){
		     var CheckAll=document.getElementById('chose-all');
		     var UnCheck=document.getElementById('chose-none');
		     var OtherCheck=document.getElementById('chose-reverse');
		     var CheckBox=document.getElementsByName('goods-chose');
		     CheckAll.onclick=function(){
		             for(i=0;i<CheckBox.length;i++){
		                     CheckBox[i].checked=true;
		                 };
		         };
		     UnCheck.onclick=function(){
		             for(i=0;i<CheckBox.length;i++){
		                     CheckBox[i].checked=false;
		                 };
		         };
		     OtherCheck.onclick=function(){
		             for(i=0;i<CheckBox.length;i++){
		                     if(CheckBox[i].checked==true){
		                             CheckBox[i].checked=false;
		                         }
		                     else{
		                         CheckBox[i].checked=true;
		                        }
		                     
		                 };
		         };
		};
		function tip(obj) {
			var image = $(obj).attr('data');
			$index = layer
					.tips(
							'<img style="width:300px; height:300px;" src="'+image+'"/>',
							obj, {
								area : [ '320px', '310px' ],
								tips : [ 2, '#FAFAFA' ]
							});
		}

		function editgoods(id,status) {
			$.ajax({
				type : "post",
				url : "?s=GoodsCenter/tuijiantrue",
				data : {"id":id,"status":status},
				dataType : "json",
				success : function(data) {
					if (data['msg'] == 1) {
						layer.msg('操作成功', {time : 1000}, function() {
							window.location.reload();
						});
					} else {
						layer.msg('操作失败', {time : 1000});
					}
				}
			});
		}
		$(function() {
			var id = "{$shaixuanid}";
			if (id == 1) {
				$("#shaixuan").css("display", "block");
				$("#shaixuanid").val("1");
			} else {
				$("#shaixuan").css("display", "none");
				$("#shaixuanid").val("0");
			}
		});
		function shaixuan() {
			$("#shaixuan").css("display");
			if ($("#shaixuan").css("display") == "none") {
				$("#shaixuan").css("display", "block");
				$("#shaixuanid").val("1");
			} else {
				$("#shaixuan").css("display", "none");
				$("#shaixuanid").val("0");
			}
		}
		function batheditgoods(status){
			if (!confirm("确定批量操作所有勾选的商品?")) {
	            return;
	        }
			var ids = "";
			var CheckBox=document.getElementsByName('goods-chose');
		    for(var i = 0; i < CheckBox.length; i++){
			     if(CheckBox[i].checked){
			    	 if (i < (CheckBox.length - 1)) {
			    		 ids += CheckBox[i].value+",";
			    	 } else if (i == (CheckBox.length - 1)) {
			    		 ids += CheckBox[i].value;
			    	 }
			     }
		    } 
		    $.ajax({
				type : "post",
				url : "?s=GoodsCenter/batheditgoods",
				data : {"ids":ids,"status":status},
				dataType : "json",
				success : function(data) {
					if (data['msg'] == 1) {
						layer.msg('操作成功', {time : 1000}, function() {
							window.location.reload();
						});
					} else {
						layer.msg('操作失败', {time : 1000});
					}
				}
			});
		}
	</script>

</body>
</html>